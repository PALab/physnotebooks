% 399.sty --- Physics, University of Auckland.
%
% Yourong Frank Wang
%	April; 20, 2020

\NeedsTeXFormat{LaTeX2e}
%\ProvidesPackage{399}[2020/04/20 v0.42 DEV Physics Lab Styles and Automated Formatting]
    
% ------------------------------------------------------
% OLD MANUAL
% ------------------------------------------------------


% A laboratory .tex file should have the format:


% \documentclass{article}
%
% \RequirePackage{labs} % Makes latex use this style file.
%
% \def\expttitle{Spatial Fourier transform} % Experiment title
% \def\exptnumber{238} % Experiment number
% \markright{Experiment \exptnumber: \expttitle} % Labels the pages
%
% Any other preamble you need e.g. \RequirePackage{graphicx}
% Note that \fig and \dispfig (defined in `labs.sty') use psfrags.
%
% \begin{document}
%
% \maketitle % Puts the heading for the experiment
%
%
% \section*{Aim}
%
% In this experiment you will acquire, etc.
%
%
% \section*{The numbering of procedures}
%
% This line will not be numbered.
% \enumprocedure % Defined within this style file.
%   \begin{enumerate}
%     \item The first numbered procedure.
%     \item The second numbered procedure.
%   \end{enumerate}
% Some instructions (not numbered).
%   \begin{enumerate}
%     \item The third numbered procedure.
%   \end{enumerate}
% \endenumprocedure % Defined within this style file.
% More instructions.
% \begin{enumerate}
%   \item This will be labelled `1'.
% \end{enumerate}
% \enumprocedure
%   \begin{enumerate}
%     \item The fourth numbered procedure.
%   \end{enumerate}
% \endenumprocedure
%
%
% And, finally, this is what should come at the end...
%
%\noindent J. Schr{\"o}der --- \today. % Author's name(s) and date.
%
%\end{document}
%

% ------------------------------------------------------
\RequirePackage{ifthen}
\RequirePackage{xcolor}
\RequirePackage{etoolbox}
\RequirePackage{xstring}
\RequirePackage{lineno}
\RequirePackage{framed}
\RequirePackage{kvoptions}
\RequirePackage{fancyhdr}
\RequirePackage{palatino}
\RequirePackage[most]{tcolorbox}
\RequirePackage{graphicx}
\RequirePackage{amsmath}
\RequirePackage{amsfonts}
\RequirePackage{amssymb}
\RequirePackage{import}
\RequirePackage{perpage}
\RequirePackage{footnote}
\MakePerPage{footnote}
\RequirePackage{physics}
\RequirePackage{algorithmic}
\RequirePackage[export]{adjustbox}
\RequirePackage{url}


% GRAPHICS RELATED PACKAGES
\RequirePackage{scalerel}
\RequirePackage{tikz}
\RequirePackage{svg}

\svgpath{{../NewStyle/Graphics/}{../../NewStyle/Graphics/}{../../../NewStyle/Graphics/}}

% INLINE SYMBOLS
\newcommand{\CODE}{\includesvg[height = 3mm]{CODE}}
\newcommand{\DISC}{\includesvg[height = 3mm]{DISC}}
\newcommand{\EXER}{\includesvg[height = 3mm]{EXER}}
\newcommand{\INTN}{\includesvg[height = 3mm]{INTN}}
\newcommand{\MSMT}{\includesvg[height = 3mm]{MSMT}}
\newcommand{\PRES}{\includesvg[height = 3mm]{PRES}}
\newcommand{\QSTN}{\includesvg[height = 3mm]{QSTN}}
\newcommand{\WAIT}{\includesvg[height = 3mm]{WAIT}}
\newcommand{\WARN}{\includesvg[height = 3mm]{WARN}}

%Undefined Labcolor
\definecolor{cTitle}{cmyk}{0, 0, 0, 1}
\definecolor{cText}{cmyk}{0, 0, 0, 0.7}
\newcommand{\DocumentType}{}

\ifthenelse{\equal{\IsExperiment}{True}}
{
\newcommand{\ActivityType}{Experiment}	
}
{\newcommand{\ActivityType}{Project}}

\renewcommand{\headrulewidth}{0pt}

\ifthenelse{\equal{\expcolor}{R}}{
\definecolor{cTitle}{cmyk}{0, 0.78, 0.72, 0.4}
\definecolor{cText}{cmyk}{0.18, 0.98, 0.1, 0.8}
\renewcommand{\DocumentType}{Experiment in Modern and Quantum Physics}}{}

\ifthenelse{\equal{\expcolor}{G}}{
\definecolor{cTitle}{cmyk}{0.73, 0.15, 1, 0.28}
\definecolor{cText}{cmyk}{0.8, 0.6, 1, 0}
\renewcommand{\DocumentType}{Experiment in General and Optical Physics}}{}

\ifthenelse{\equal{\expcolor}{B}}{
\definecolor{cTitle}{cmyk}{0.82, 0.63, 0, 0}
\definecolor{cText}{cmyk}{0.95, 0.81, 0, 0}
\renewcommand{\DocumentType}{Experiment in Electrical and Digital Physics}}{}

\ifthenelse{\equal{\expcolor}{N}}{
	\definecolor{cTitle}{cmyk}{0, 0, 0, 1}
	\definecolor{cText}{cmyk}{0.2, 0.2, 0.2, 0.8}
	\renewcommand{\DocumentType}{Physics 399 Course Material}
	\renewcommand{\maketitle}{
		\begin{center}
			\textsc{\DocumentType}
			\vspace{2mm}
			{\color{cTitle} \rule{\linewidth}{0.4mm} }
			{\LARGE \textcolor{cTitle}{\expttitle}}
			{\color{cTitle} \rule{\linewidth}{0.4mm} }
		\end{center}
}}% R,G,B
{
	\renewcommand{\maketitle}{
		\begin{center}
			\textsc{\DocumentType}
			\vspace{2mm}
			{\color{cTitle} \rule{\linewidth}{0.4mm} }
			{\LARGE \textcolor{cTitle}{\textbf{\ActivityType \  \exptnumber:}}\ \textcolor{cText}{\expttitle}}
			{\color{cTitle} \rule{\linewidth}{0.4mm} }
		\end{center}
	\thispagestyle{fancy}
	\fancyhead{}
	\rhead{\textcolor{cTitle}{\textbf{Load Factors: \ }} \fbox{\ELF}}
}
}

% INTEGRITY PROTECTION
\RequirePackage[printwatermark]{xwatermark}

\ifthenelse{\equal{\IsDocumentReady}{True}}{
\markright{\expttitle}     
}{
\markright{Internal Draft: \today}    
\newwatermark[allpages,textalign=center,fontfamily=bch,color=gray!25,angle=45,scale=6,12 xpos=0,ypos=0]{DRAFT}}

\newtcolorbox[auto counter]{QBox}{
	colframe     = cTitle,
	colbacktitle = white,
	title = \color{black}{\QSTN \quad \textsc{\large{Question \thetcbcounter}}},enhanced}

\newtcolorbox{PBox}[2][]{
               = {yshift=-8pt},
  colframe     = cText,
  fonttitle    = \bfseries,
  colbacktitle = white,
  title        = \color{black}{\PRES \quad \textsc{\large{Discussion #2}}},#1,
  enhanced,
}

\newtcolorbox{NBox}[2][]{
               = {yshift=-8pt},
  colframe     = cText,
  fonttitle    = \bfseries,
  colbacktitle = white,
  title        = \color{black}{\EXER \quad \textsc{\large{#2}}},#1,
  enhanced,
}

\newtcolorbox{DBox}[2][]{
               = {yshift=-8pt},
  colframe     = cText,
  fonttitle    = \bfseries,
  colbacktitle = white,
  title        = \color{black}{\DISC \quad \textsc{\large{#2}}},#1,
  enhanced,
}

% Legacy Support
\newtcolorbox{WarningBox}{
               = {yshift=-8pt},
  colframe     = red,
  fonttitle    = \bfseries,
  colbacktitle = orange,
  title        = \textsc{Caution},
  enhanced,
}

\newtcolorbox{WBox}{
	= {yshift=-8pt},
	colframe     = red,
	fonttitle    = \bfseries,
	colbacktitle = orange,
	title        = \textsc{Caution},
	enhanced,
}

\newtcolorbox[use counter*={figure},number within=section]{FigBox}[2][]{
= {yshift=-8pt,center},
  colframe     = cText,
  fonttitle    = \bfseries,
  colbacktitle = white,
  title        = \color{cTitle}{\textsc{\large{Figure \thefigure: #2}}},#1,
  enhanced,
}


\pagestyle{myheadings}
\renewcommand{\thepage}{\exptnumber-\arabic{page}}
\renewcommand{\theequation}{\arabic{equation}}
\renewcommand{\thefigure}{\arabic{figure}}
\renewcommand{\thetable}{\arabic{table}}
\renewcommand{\thefootnote}{(\arabic{footnote})}


\setlength{\textheight}{9.5in}
\setlength{\textwidth}{6.5in}
\setlength{\parskip}{6pt plus 3pt}
\setlength{\parindent}{0pt}
\setlength{\topmargin}{-0.5in}
\setlength{\headsep}{0.5 in}
\setlength{\oddsidemargin}{0in}
\setlength{\evensidemargin}{\oddsidemargin}
\newcommand{\resetcounters}{
\setcounter{page}{1}
\setcounter{equation}{0}
\setcounter{figure}{0}
\setcounter{table}{0}}
\newtheorem{theorem}{Theorem}
\newtheorem{acknowledgement}[theorem]{Acknowledgement}
\newtheorem{algorithm}[theorem]{Algorithm}
\newtheorem{axiom}[theorem]{Axiom}
\newtheorem{case}[theorem]{Case}
\newtheorem{claim}[theorem]{Claim}
\newtheorem{conclusion}[theorem]{Conclusion}
\newtheorem{condition}[theorem]{Condition}
\newtheorem{conjecture}[theorem]{Conjecture}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{criterion}[theorem]{Criterion}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{example}[theorem]{Example}
\newtheorem{exercise}[theorem]{Exercise}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{notation}[theorem]{Notation}
\newtheorem{problem}[theorem]{Problem}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{remark}[theorem]{Remark}
\newtheorem{solution}[theorem]{Solution}
\newtheorem{summary}[theorem]{Summary}
\newenvironment{proof}[1][Proof]{\textbf{#1.} }{\ \rule{0.5em}{0.5em}}

\newcounter{procctr}
\def\enumprocedure{
\let\savei\labelenumi
\let\saveii\theenumi
\let\saveitem\item
\def\item{\setcounter{enumi}{\value{procctr}}\saveitem}
\renewcommand{\theenumi}{\arabic{enumi}}
\renewcommand{\labelenumi}{\stepcounter{procctr}(\theenumi)\ }
}
\def\endenumprocedure{
\let\labelenumi\savei
\let\theenumi\saveii
\let\item\saveitem
}
% Latex file for assignments
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\fig}[4]{\begin{figure}[htbf]
\begin{center}\begin{psfrags}\input #2.fra
\epsfysize=#1mm\leavevmode\epsfbox{#2.ps}\end{psfrags}\caption{#3}
\label{#4}\end{center}\end{figure}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\dispfig}[2]{
\begin{center}\begin{psfrags}\input #2.fra
\epsfysize=#1mm\leavevmode\epsfbox{#2.ps}\end{psfrags}
\end{center}}


